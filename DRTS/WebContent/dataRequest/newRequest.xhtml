<!DOCTYPE html>

<html xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" lang="en-us"
	xmlns="http://www.w3.org/1999/xhtml" class="no-js">

	<c:set var="root" value="#{request.requestURL.substring(0, request.requestURL.length() - request.requestURI.length())}#{request.contextPath}/" scope="request" />

    <h:head>
    	
    	<ui:include src="#{root}includes/scripts.xhtml" />

	   	<title>Data Request Tracking System | Federal Student Aid</title>
    
    </h:head>
    
    <h:body class="section-two">
    
    	<ui:include src="#{root}includes/header.xhtml">
    		<ui:param name="active" value="2" />
    	</ui:include>
    	
    	<div id="content-wrapper">
            <div class="grid">
                <div id="breadcrumb" class="col-1-1 mobile-col-1-1">
                    <h:link value="Home" outcome="#{userSession.homePage}" /> Â» Create Request
                </div> 
                <section class="col-1-1 mobile-col-1-1">
                    <header id="content-header" class="col-1-1 mobile-col-1-1">
                        <span class="content-header-box">
                            <h1>Create New Request</h1>
                        </span>
                    </header>
                    <div id="main-content" class="col-1-1 mobile-col-1-1">
                        <section class="col-1-1 mobile-col-1-1">
                        
                        	<h:form id="request-form" styleClass="col-1-1 mobile-col-1-1">
                        	
                        		<p>
      								Please fill out the form below, with as much information as possible, to create a new data request. You can use 
      								the "Save as Draft" button to save the entered information without submitting the request.
      							</p>
                        	
                        		<div class="form-wrapper col-1-1 mobile-col-1-1">
                                    
                                    <div id="drtsTabs">
                                         <ul>
                                            <li><a href="#general">Request Details</a></li>
                                            <li><a href="#requestor">Requestor</a></li>
                                            <li><a href="#receiver">Receiver</a></li>
                                            <li><a href="#attachments">Attachments</a></li>
                                        </ul>
                                        <div id="general">
											<h:outputLabel for="iteration" value="Iteration"/>
                                            <h:outputText id="iteration" styleClass="form-text" value="#{dataRequest.iteration}" />

											<h:outputLabel for="status" value="Status"/>
                                            <h:outputText id="status" styleClass="form-text" value="#{dataRequest.status}" />
                                            
                                            <label>Creation Date</label>
                                            <h:outputText styleClass="form-text" value="#{dataRequest.createdDateTime}">
								      			<f:converter converterId="defaultDateTimeConverter" />
								      		</h:outputText>
								      		
								      		<label>Original Request Date</label>
								      		<h:inputText styleClass="datepicker" value="#{dataRequest.originalRequestDate}">
                                            	<f:converter converterId="defaultDateConverter" />
                                            </h:inputText>
								      		
								      		<h:outputLabel for="type" value="Type"/>
		                                    <h:selectOneMenu id="type" value="#{dataRequest.type}">
									   			<f:selectItems value="#{dataRequest.types}" />
									   		</h:selectOneMenu>
									   		
									   		<h:outputLabel for="system" value="System"/>
		                                    <h:selectOneMenu id="system" value="#{dataRequest.system}">
									   			<f:selectItems value="#{dataRequest.systems}" />
									   		</h:selectOneMenu>
                                            
                                            <h:outputLabel for="requestedDueDate" value="Requested Due Date"/>
                                            <h:inputText id="requestedDueDate" styleClass="datepicker" value="#{dataRequest.dueDate}">
                                            	<f:converter converterId="defaultDateConverter" />
                                            </h:inputText>
                                            
                                            <h:outputLabel for="tier" value="Tier"/>
		                                    <h:selectOneMenu id="tier" value="#{dataRequest.tier}">
									   			<f:selectItems value="#{dataRequest.tiers}" />
									   		</h:selectOneMenu>
                                            
                                            <h:outputLabel for="urgencyFlag" value="Urgency Flag"/>
                                            <h:selectBooleanCheckbox id="urgencyFlag" value="#{dataRequest.urgent}" />
                                            
                                            <h:outputLabel for="piiFlag" value="PII Flag"/>
                                            <h:selectBooleanCheckbox id="piiFlag" value="#{dataRequest.pii}" />
                                            
                                            <h:outputLabel for="relatedRequests" value="Related Requests"/>
                                    		<h:inputTextarea id="relatedRequests" value="#{dataRequest.relatedRequests}" />

											<h:outputLabel for="topics" value="Topic/Keywords"/>
                                    		<h:inputTextarea id="topics" value="#{dataRequest.topicKeywords}" />

											<h:outputLabel for="description" value="Description"/>
                                    		<h:inputTextarea id="description" value="#{dataRequest.description}" />

                                            <h:outputLabel for="purpose" value="Purpose"/>
                                    		<h:inputTextarea id="purpose" value="#{dataRequest.purpose}" />

                                            <h:outputLabel for="issues" value="Special Considerations/Issues"/>
                                    		<h:inputTextarea id="issues" value="#{dataRequest.specialConsiderationsIssues}" />

                                            <h:outputLabel for="assumptions" value="Clarifications/Assumptions"/>
                                    		<h:inputTextarea id="assumptions" value="#{dataRequest.clarificationsAssumptions}" />

                                            <h:outputLabel for="goldenQueryLibrary" value="Golden Query Library"/>
                                    		<h:inputTextarea id="goldenQueryLibrary" value="#{dataRequest.goldenQueryLibrary}" />

                                            <h:outputLabel for="requirements" value="Business Requirements"/>
                                    		<h:inputTextarea id="requirements" value="#{dataRequest.businessRequirements}" />
                                        </div>
                                        <div id="requestor">
                                        	<p>Please enter all information, below, about the person who is requesting the data.</p>
                                        
                                        	<h:outputLabel for="requestor" value="Requestor"/>
                                            <h:inputText id="requestor" value="#{dataRequest.requestorName}" />
                                            
                                        	<h:outputLabel for="requestorOrganization" value="Requestor Organization"/>
                                            <h:inputText id="requestorOrganization" value="#{dataRequest.requestorOrganization}" />
                                            
                                        	<h:outputLabel for="requestorPhone" value="Requestor Phone"/>
                                            <h:inputText id="requestorPhone" value="#{dataRequest.requestorPhone}" />
                                            
                                        	<h:outputLabel for="requestorEmail" value="Requestor Email"/>
                                            <h:inputText id="requestorEmail" value="#{dataRequest.requestorEmail}" />
                                        </div>
                                        <div id="receiver">
                                        	<p>Please enter all information, below, about the person who will receive the requested data.</p>
                                        	
                                        	<h:outputLabel for="receiver" value="Receiver"/>
                                            <h:inputText id="receiver" value="#{dataRequest.receiverName}" />
                                            
                                        	<h:outputLabel for="receiverEmail" value="Receiver Email"/>
                                            <h:inputText id="receiverEmail" value="#{dataRequest.receiverEmail}" />
                                        </div>
                                        <div id="attachments">
                                        	<label>Attached Files</label>
                                        	<h:panelGroup rendered="#{empty dataRequest.attachments}">
                                        		<p id="no-file">There are no attachments.</p>
                                        	</h:panelGroup>
                                        </div>
                                    </div>
                                
                                </div>
                                
                                <div class="form-control col-1-1 mobile-col-1-1">
                                	<h:commandButton value="Save as Draft" styleClass="button" action="#{dataRequest.updateRequest(1)}" />
                                	<h:commandButton value="Create" styleClass="button" action="#{dataRequest.updateRequest(2)}" />
   	                              	<h:commandButton styleClass="button" value="Cancel" action="#{userSession.getHomePageRedirect}" />
 
                                </div>
								
					    	</h:form>
					    	
					    	<div id="current_request_id_div" hidden="true"><h:outputText value="#{dataRequest.id}" /></div>
					    	<div id="fileuploader">Upload</div>
					    	
                        </section>
                    </div>
                </section>
            </div>
        </div>
        
        <ui:include src="#{root}includes/footer.xhtml" />
    	
    </h:body>
    
</html>