<!DOCTYPE html>

<html xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pf="http://primefaces.org/ui"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" lang="en-us"
	xmlns="http://www.w3.org/1999/xhtml" class="no-js">

	<c:set var="root" value="#{request.requestURL.substring(0, request.requestURL.length() - request.requestURI.length())}#{request.contextPath}/" scope="request" />

    <h:head>
    	
    	<ui:include src="#{root}includes/scripts.xhtml" />

	   	<title>Data Request Tracking System | Federal Student Aid</title>
    
    </h:head>
    
    <h:body class="section-three">
    
    	<ui:include src="#{root}includes/header.xhtml">
    		<ui:param name="active" value="3" />
    	</ui:include>
    	
    	<div id="content-wrapper">
            <div class="grid">
                <div id="breadcrumb" class="col-1-1 mobile-col-1-1">
                    <h:link value="Home" outcome="#{userSession.homePage}" /> » Search Requests
                </div>
                <section class="col-1-1 mobile-col-1-1">
                    <header id="content-header" class="col-1-1 mobile-col-1-1">
                        <span class="content-header-box">
                            <h1>Search Requests</h1>
                        </span>
                    </header>
                    <div id="main-content" class="col-1-1 mobile-col-1-1">
                        <section class="col-1-1 mobile-col-1-1">
                        
                        	<h:form styleClass="col-1-1 mobile-col-1-1">
                        	
                        		<p>
      								Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla volutpat dui at metus ultrices, at 
      								sollicitudin felis varius. Cras sed orci nisl. Donec semper ornare dignissim. Fusce et neque finibus, 
      								porttitor elit vel, feugiat lectus. Aliquam nunc odio, placerat vitae dapibus finibus, facilisis venenatis 
      								eros. Vestibulum id purus sit amet risus dapibus elementum. In nulla elit, convallis et quam a, viverra 
      								dapibus justo.
      							</p>
      							
      							<div class="form-wrapper col-1-1 mobile-col-1-1">
      							
      								<div id="drtsTabs">
                                         <ul>
                                            <li><a href="#byid">By ID</a></li>
                                            <li><a href="#byfields">By Fields</a></li>
                                            <li><a href="#bykeyword">By Keyword</a></li>
                                        </ul>
                                        <div id="byid">
                                        	<h:outputLabel value="ID"/>
	      									<h:inputText value="#{searchBean.displayId}" />
                                        </div>
                                        <div id="byfields">
                                        	<h:outputLabel value="Requestor"/>
	      									<h:inputText value="#{searchBean.requestor}" />
	      									
	      									<h:outputLabel value="Assignee"/>
	      									<h:inputText value="#{searchBean.assignee}" />
                                        
                                        	<h:outputLabel value="Status"/>
		                                    <h:selectOneMenu value="#{searchBean.status}">
									   			<f:selectItems value="#{searchBean.statuses}" />
									   		</h:selectOneMenu>
									   		
                                        	<h:outputLabel value="Type"/>
		                                    <h:selectOneMenu value="#{searchBean.type}">
									   			<f:selectItems value="#{searchBean.types}" />
									   		</h:selectOneMenu>
									   		
									   		<h:outputLabel value="Created Date From"/>
                                            <h:inputText styleClass="date-from" value="#{searchBean.createdDateFrom}">
                                            	<f:converter converterId="defaultDateConverter" />
                                            </h:inputText>
                                            
                                            <h:outputLabel value="Created Date To"/>
                                            <h:inputText styleClass="date-to" value="#{searchBean.createdDateTo}">
                                            	<f:converter converterId="defaultDateConverter" />
                                            </h:inputText>
                                        </div>
                                        <div id="bykeyword">
                                        	<h:outputLabel value="Keyword"/>
	      									<h:inputText value="#{searchBean.keyword}" />
	      								</div>
                                   	</div>
      							
      							</div>
      							
      							<div class="form-control col-1-1 mobile-col-1-1">
                                	<h:commandButton value="Search" styleClass="button" action="#{searchBean.search}" />
                                	<h:commandButton value="Clear" styleClass="button" action="#{searchBean.clear}" />
                                </div>
                                
                                <h:panelGroup rendered="#{searchBean.searchWasRun}">
                                	<h:panelGroup rendered="#{not empty searchBean.resultsTable.dataRequests}">
	                                	<h:dataTable styleClass="drtsTable" value="#{searchBean.resultsTable.dataRequests}" var="dataRequest">
	                                		<h:column>
							      				<f:facet name="header">
							      					<h:commandLink actionListener="#{searchBean.resultsTable.sort}">
							      						<f:attribute name="sort_field" value="request_display_id" />
							      						<span>ID</span>
							      						<h:panelGroup rendered="#{searchBean.resultsTable.isSortedBy('request_display_id')}">
								      						<h:panelGroup rendered="#{searchBean.resultsTable.sortAscending eq true}">
								      							<span class="arrow-up"></span>
								      						</h:panelGroup>
								      						<h:panelGroup rendered="#{searchBean.resultsTable.sortAscending eq false}">
								      							<span class="arrow-down"></span>
								      						</h:panelGroup>
							      						</h:panelGroup>
							    			   		</h:commandLink>
							      				</f:facet>
							      				<h:outputText value="#{dataRequest.displayId}" />
							      			</h:column>
							      			<h:column>
							      				<f:facet name="header">Description</f:facet>
							      				<h:outputText value="#{dataRequest.description}" />
							      			</h:column>
							      			<h:column>
							      				<f:facet name="header">
							      					<h:commandLink actionListener="#{searchBean.resultsTable.sort}">
							      						<f:attribute name="sort_field" value="request_created_by" />
							      						<span>Requestor</span>
							      						<h:panelGroup rendered="#{searchBean.resultsTable.isSortedBy('request_created_by')}">
								      						<h:panelGroup rendered="#{searchBean.resultsTable.sortAscending eq true}">
								      							<span class="arrow-up"></span>
								      						</h:panelGroup>
								      						<h:panelGroup rendered="#{searchBean.resultsTable.sortAscending eq false}">
								      							<span class="arrow-down"></span>
								      						</h:panelGroup>
							      						</h:panelGroup>
							    			   		</h:commandLink>
							      				</f:facet>
							      				<h:outputText value="#{dataRequest.drtsRequestor}" />
							      			</h:column>
							      			<h:column>
							      				<f:facet name="header">
							      					<h:commandLink actionListener="#{searchBean.resultsTable.sort}">
							      						<f:attribute name="sort_field" value="request_status" />
							      						<span>Status</span>
							      						<h:panelGroup rendered="#{searchBean.resultsTable.isSortedBy('request_status')}">
								      						<h:panelGroup rendered="#{searchBean.resultsTable.sortAscending eq true}">
								      							<span class="arrow-up"></span>
								      						</h:panelGroup>
								      						<h:panelGroup rendered="#{searchBean.resultsTable.sortAscending eq false}">
								      							<span class="arrow-down"></span>
								      						</h:panelGroup>
							      						</h:panelGroup>
							    			   		</h:commandLink>
							      				</f:facet>
							      				<h:outputText value="#{dataRequest.status}" />
							      			</h:column>
							      			<h:column>
							      				<f:facet name="header">
							      					<h:commandLink actionListener="#{searchBean.resultsTable.sort}">
							      						<f:attribute name="sort_field" value="request_created_date_time" />
							      						<span>Created On</span>
							      						<h:panelGroup rendered="#{searchBean.resultsTable.isSortedBy('request_created_date_time')}">
								      						<h:panelGroup rendered="#{searchBean.resultsTable.sortAscending eq true}">
								      							<span class="arrow-up"></span>
								      						</h:panelGroup>
								      						<h:panelGroup rendered="#{searchBean.resultsTable.sortAscending eq false}">
								      							<span class="arrow-down"></span>
								      						</h:panelGroup>
							      						</h:panelGroup>
							    			   		</h:commandLink>
							      				</f:facet>
							      				<h:outputText value="#{dataRequest.createdDateTime}">
							      					<f:converter converterId="defaultDateTimeConverter" />
							      				</h:outputText>
							      			</h:column>
							      			<h:column>
							      				<f:facet name="header">
							      					<h:commandLink actionListener="#{searchBean.resultsTable.sort}">
							      						<f:attribute name="sort_field" value="request_due_date" />
							      						<span>Due Date</span>
							      						<h:panelGroup rendered="#{searchBean.resultsTable.isSortedBy('request_due_date')}">
								      						<h:panelGroup rendered="#{searchBean.resultsTable.sortAscending eq true}">
								      							<span class="arrow-up"></span>
								      						</h:panelGroup>
								      						<h:panelGroup rendered="#{searchBean.resultsTable.sortAscending eq false}">
								      							<span class="arrow-down"></span>
								      						</h:panelGroup>
							      						</h:panelGroup>
							    			   		</h:commandLink>
							      				</f:facet>
							      				<h:outputText value="#{dataRequest.dueDate}">
							      					<f:converter converterId="defaultDateConverter" />
							      				</h:outputText>
							      			</h:column>
	                                	</h:dataTable>
	                                	<h:panelGroup rendered="#{searchBean.resultsTable.totalPages > 1}">
								      		<div class="table-control">
			                                    <h:outputText value="(Page #{searchBean.resultsTable.currentPage}/#{searchBean.resultsTable.totalPages}) " />
			                                    <h:commandLink value="« first" action="#{searchBean.resultsTable.pageFirst}" rendered="#{searchBean.resultsTable.firstRow ne 0}" />
			                                    <h:commandLink value="‹ prev" action="#{searchBean.resultsTable.pagePrevious}" rendered="#{searchBean.resultsTable.firstRow ne 0}" />
			                                    <ui:repeat var="page" value="#{searchBean.resultsTable.pages}">
													<h:commandLink value="#{page}" actionListener="#{searchBean.resultsTable.page}" rendered="#{page ne searchBean.resultsTable.currentPage}" />
													<h:outputText value="#{page}" escape="false" rendered="#{page eq searchBean.resultsTable.currentPage}" />
												</ui:repeat>
			                                    <h:commandLink value="next ›" action="#{searchBean.resultsTable.pageNext}" rendered="#{(searchBean.resultsTable.firstRow + searchBean.resultsTable.rowsPerPage) lt searchBean.resultsTable.totalRows}" />
								      			<h:commandLink value="last »" action="#{searchBean.resultsTable.pageLast}" rendered="#{(searchBean.resultsTable.firstRow + searchBean.resultsTable.rowsPerPage) lt searchBean.resultsTable.totalRows}" />
			                                </div>
		                                </h:panelGroup>
	                                </h:panelGroup>
                                	<h:panelGroup rendered="#{empty searchBean.resultsTable.dataRequests}">
	                                	<p>The search criteria did not match any data requests.</p>
	                                </h:panelGroup>
                                </h:panelGroup>
    	
    						</h:form>
    						
    						<div id="current_tab" hidden="true"><h:outputText value="#{searchBean.currentTab}" /></div>
					    	
                        </section>
                    </div>
                </section>
            </div>
        </div>
        
        <ui:include src="#{root}includes/footer.xhtml" />
    	
    </h:body>
    
</html>