<!DOCTYPE html>

<html xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" lang="en-us"
	xmlns="http://www.w3.org/1999/xhtml" class="no-js">

	<c:set var="root" value="#{request.requestURL.substring(0, request.requestURL.length() - request.requestURI.length())}#{request.contextPath}/" scope="request" />

    <h:head>
    	
    	<ui:include src="/includes/scripts.xhtml" />

	   	<title>Data Request Tracking System | Federal Student Aid</title>
    
    </h:head>
    
    <h:body class="section-one">
    
    	<ui:include src="/includes/header.xhtml">
    		<ui:param name="active" value="1" />
    	</ui:include>
    	
    	<div id="content-wrapper">
            <div class="grid">
                <section class="col-1-1 mobile-col-1-1">
                    <header id="content-header" class="col-1-1 mobile-col-1-1">
                        <span class="content-header-box">
                            <h1>Home</h1>
                        </span>
                    </header>
                    <div id="main-content" class="col-1-1 mobile-col-1-1">
                        <section class="col-1-1 mobile-col-1-1">
                        
                        	<h:form styleClass="col-1-1 mobile-col-1-1">
					      		
					      		<p>
      								Welcome to the DRTS application. 
      							</p>
      							
      							<p>
      								Below you will find a list of data requests that require your action. 
      							</p>
					      		
					      		<h2>Available Tasks</h2>
					      		
					      		<h:panelGroup rendered="#{not empty requestTable.table1.dataRequests}">
					      		
						      		<h:dataTable styleClass="drtsTable" value="#{requestTable.table1.dataRequests}" var="dataRequest">
						      		
						      			<h:column>
						      				<f:facet name="header">
						      					<h:commandLink actionListener="#{requestTable.table1.sort}">
						      						<f:attribute name="sort_field" value="request_display_id" />
						      						<span>ID</span>
						      						<h:panelGroup rendered="#{requestTable.table1.isSortedBy('request_display_id')}">
							      						<h:panelGroup rendered="#{requestTable.table1.sortAscending eq true}">
							      							<span class="arrow-up"></span>
							      						</h:panelGroup>
							      						<h:panelGroup rendered="#{requestTable.table1.sortAscending eq false}">
							      							<span class="arrow-down"></span>
							      						</h:panelGroup>
						      						</h:panelGroup>
						    			   		</h:commandLink>
						      				</f:facet>
						      				<h:outputText value="#{dataRequest.displayId}" />
						      			</h:column>
						      			
						      			<h:column>
						      				<f:facet name="header">Description</f:facet>
						      				<h:outputText value="#{dataRequest.description}" />
						      			</h:column>
						      		
						      			<h:column>
						      				<f:facet name="header">
						      					<h:commandLink actionListener="#{requestTable.table1.sort}">
						      						<f:attribute name="sort_field" value="created_by" />
						      						<span>Requestor</span>
						      						<h:panelGroup rendered="#{requestTable.table1.isSortedBy('created_by')}">
							      						<h:panelGroup rendered="#{requestTable.table1.sortAscending eq true}">
							      							<span class="arrow-up"></span>
							      						</h:panelGroup>
							      						<h:panelGroup rendered="#{requestTable.table1.sortAscending eq false}">
							      							<span class="arrow-down"></span>
							      						</h:panelGroup>
						      						</h:panelGroup>
						    			   		</h:commandLink>
						      				</f:facet>
						      				<h:outputText value="#{dataRequest.drtsRequestor}" />
						      			</h:column>
						      		
						      			<h:column>
						      				<f:facet name="header">
						      					<h:commandLink actionListener="#{requestTable.table1.sort}">
						      						<f:attribute name="sort_field" value="request_status" />
						      						<span>Status</span>
						      						<h:panelGroup rendered="#{requestTable.table1.isSortedBy('request_status')}">
							      						<h:panelGroup rendered="#{requestTable.table1.sortAscending eq true}">
							      							<span class="arrow-up"></span>
							      						</h:panelGroup>
							      						<h:panelGroup rendered="#{requestTable.table1.sortAscending eq false}">
							      							<span class="arrow-down"></span>
							      						</h:panelGroup>
						      						</h:panelGroup>
						    			   		</h:commandLink>
						      				</f:facet>
						      				<h:outputText value="#{dataRequest.status}" />
						      			</h:column>
						      			
						      			<h:column>
						      				<f:facet name="header">
						      					<h:commandLink actionListener="#{requestTable.table1.sort}">
						      						<f:attribute name="sort_field" value="drt_request_date" />
						      						<span>Created On</span>
						      						<h:panelGroup rendered="#{requestTable.table1.isSortedBy('drt_request_date')}">
							      						<h:panelGroup rendered="#{requestTable.table1.sortAscending eq true}">
							      							<span class="arrow-up"></span>
							      						</h:panelGroup>
							      						<h:panelGroup rendered="#{requestTable.table1.sortAscending eq false}">
							      							<span class="arrow-down"></span>
							      						</h:panelGroup>
						      						</h:panelGroup>
						    			   		</h:commandLink>
						      				</f:facet>
						      				<h:outputText value="#{dataRequest.createdDateTime}">
						      					<f:converter converterId="defaultDateTimeConverter" />
						      				</h:outputText>
						      			</h:column>
						      			
						      			<h:column>
						      				<f:facet name="header">
						      					<h:commandLink actionListener="#{requestTable.table1.sort}">
						      						<f:attribute name="sort_field" value="requested_due_date" />
						      						<span>Requested Due Date</span>
						      						<h:panelGroup rendered="#{requestTable.table1.isSortedBy('requested_due_date')}">
							      						<h:panelGroup rendered="#{requestTable.table1.sortAscending eq true}">
							      							<span class="arrow-up"></span>
							      						</h:panelGroup>
							      						<h:panelGroup rendered="#{requestTable.table1.sortAscending eq false}">
							      							<span class="arrow-down"></span>
							      						</h:panelGroup>
						      						</h:panelGroup>
						    			   		</h:commandLink>
						      				</f:facet>
						      				<h:outputText value="#{dataRequest.dueDate}">
						      					<f:converter converterId="defaultDateConverter" />
						      				</h:outputText>
						      			</h:column>
						      		
						      			<h:column>
						      				<f:facet name="header"></f:facet>
					      					<h:commandLink action="#{requestTable.goToTask(dataRequest)}" value="#{dataRequest.currentTaskName}" />
						      			</h:column>
						      		
						      		</h:dataTable>
						      		
						      		<h:panelGroup rendered="#{requestTable.table1.totalPages > 1}">
							      		<div class="table-control">
		                                    <h:outputText value="(Page #{requestTable.table1.currentPage}/#{requestTable.table1.totalPages}) " />
		                                    <h:commandLink value="« first" action="#{requestTable.table1.pageFirst}" rendered="#{requestTable.table1.firstRow ne 0}" />
		                                    <h:commandLink value="‹ prev" action="#{requestTable.table1.pagePrevious}" rendered="#{requestTable.table1.firstRow ne 0}" />
		                                    <ui:repeat var="page" value="#{requestTable.table1.pages}">
												<h:commandLink value="#{page}" actionListener="#{requestTable.table1.page}" rendered="#{page ne requestTable.table1.currentPage}" />
												<h:outputText value="#{page}" escape="false" rendered="#{page eq requestTable.table1.currentPage}" />
											</ui:repeat>
		                                    <h:commandLink value="next ›" action="#{requestTable.table1.pageNext}" rendered="#{(requestTable.table1.firstRow + requestTable.table1.rowsPerPage) lt requestTable.table1.totalRows}" />
							      			<h:commandLink value="last »" action="#{requestTable.table1.pageLast}" rendered="#{(requestTable.table1.firstRow + requestTable.table1.rowsPerPage) lt requestTable.table1.totalRows}" />
		                                </div>
	                                </h:panelGroup>
						      		
								</h:panelGroup>
								
								<h:panelGroup rendered="#{empty requestTable.table1.dataRequests}">
									<p>You do not have any tasks.</p>
								</h:panelGroup>
								
					    	</h:form>
					    	
                        </section>
                    </div>
                </section>
            </div>
        </div>
        
        <ui:include src="/includes/footer.xhtml" />
    	
    </h:body>
    
</html>