<!DOCTYPE html>

<html xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pf="http://primefaces.org/ui"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" lang="en-us"
	xmlns="http://www.w3.org/1999/xhtml" class="no-js">

	<c:set var="root" value="#{request.requestURL.substring(0, request.requestURL.length() - request.requestURI.length())}#{request.contextPath}/" scope="request" />

    <h:head>
        
        <ui:include src="#{root}includes/scripts.xhtml" />

	   <title>Data Request Tracking System | Federal Student Aid</title>
    
    </h:head>
    
    <h:body>
    
    	<ui:include src="#{root}includes/header.xhtml" />
    	
    	<h:form>
    	
    		<h2>Data Request Tracking System - Book Order</h2>
    		
    		<ul>
      			<li><h:link value="Home" outcome="#{userSession.user.homePage}" /></li>
      			<li><h:link value="Restricted Page" outcome="/restricted" rendered="#{userSession.user.admin}" /></li>
      		</ul>
      		
			<table>
				<tr>
					<td>ISBN:</td>
					<td><h:inputText value="#{bookOrder.isbn}" />
					</td>
				</tr>
				<tr>
					<td></td>
					<td><h:commandButton value="Submit" action="#{bookOrder.start}" />
					</td>
				</tr>
			</table>
    		
    		<pf:fileUpload fileUploadListener="#{bookOrder.handleFileUpload}" 
    						mode="advanced" dragDropSupport="false"
                  			multiple="true" update="attachmentsTable" sizeLimit="100000" 
                  			allowTypes="/(\.|\/)(gif|jpe?g|png|txt)$/" />
    		
    		<h:dataTable id="attachmentsTable" value="#{bookOrder.attachments}" var="attachment">
    			<h:column>
      				<f:facet name="header"></f:facet>
      				<h:outputText value="#{attachment.fileName}" />
      			</h:column>
      			<h:column>
      				<f:facet name="header"></f:facet>
      				<h:commandLink action="#{bookOrder.deleteAttachment(attachment)}" value="Delete" />
      			</h:column>
    		</h:dataTable>
		</h:form>
        
        <ui:include src="#{root}includes/footer.xhtml" />
    	
    </h:body>
    
</html>